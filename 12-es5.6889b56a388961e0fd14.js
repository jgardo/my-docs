!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"3pp/":function(t,i,r){"use strict";r.r(i),r.d(i,"FilePageModule",(function(){return L}));var o=r("TEn/"),c=r("ofXK"),s=r("3Pt+"),a=r("tyNb"),l=r("fXoL");function u(e,t){if(1&e&&(l.Rb(0,"pre"),l.pc(1),l.Qb()),2&e){var n=l.bc();l.Eb(1),l.qc(n.file.content)}}var f,h,b=((f=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"setFile",value:function(e){this.file=e}}]),t}()).\u0275fac=function(e){return new(e||f)},f.\u0275cmp=l.Ib({type:f,selectors:[["app-default-file-viewer"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&l.nc(0,u,2,1,"pre",0),2&e&&l.ec("ngIf",t.file)},directives:[c.i],styles:["pre[_ngcontent-%COMP%]{color:var(--color)}"]}),f),d=r("Tr1Y"),p=((h=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"setFile",value:function(e){this.file=e}}]),t}()).\u0275fac=function(e){return new(e||h)},h.\u0275cmp=l.Ib({type:h,selectors:[["app-markdown-file-viewer"]],decls:1,vars:1,consts:[["name","Content","mode","preview","height","100%",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(l.Rb(0,"md-editor",0),l.Zb("ngModelChange",(function(e){return t.file.content=e})),l.Qb()),2&e&&l.ec("ngModel",t.file.content)},directives:[d.b,s.e,s.f],styles:["md-editor .preview-panel{background-color:initial!important}"]}),h),v=r("mrSG"),y=r("jhN1");function m(e,t){if(1&e&&l.Pb(0,"iframe",2),2&e){var n=l.bc();l.ec("src",n.sanitizedUrl,l.ic)}}function w(e,t){if(1&e){var n=l.Sb();l.Rb(0,"div"),l.Rb(1,"p"),l.pc(2," Url otworzony w nowym oknie przegl\u0105darki. "),l.Qb(),l.Rb(3,"ion-button",3),l.Zb("click",(function(){return l.hc(n),l.bc().openInBrowser()})),l.Pb(4,"ion-icon",4),l.pc(5," Otw\xf3rz ponownie "),l.Qb(),l.Qb()}}var g,k,S=((k=function(){function t(n,i,r){e(this,t),this.sanitizer=n,this.actionSheetController=i,this.location=r,this.mode="unknown"}return n(t,[{key:"ngOnInit",value:function(){this.presentActionSheet()}},{key:"presentActionSheet",value:function(){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionSheetController.create({header:"Url",buttons:[{text:"Otw\xf3rz w nowym oknie",role:"selected",icon:"open",handler:function(){n.mode="in-browser",n.openInBrowser()}},{text:"Otw\xf3rz w aplikacji",icon:"eye",handler:function(){n.mode="in-app"}},{text:"Anuluj",icon:"close",role:"cancel",handler:function(){n.location.back()}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"setFile",value:function(e){this.file=e,this.url=t.calculateUrl(e.content),this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.url)}},{key:"openInBrowser",value:function(){window.open(this.url)}}],[{key:"calculateUrl",value:function(e){var t=e.split("\n").filter((function(e){return e.startsWith("URL")}))[0];return t.substr(t.indexOf("=")+1).trim()}}]),t}()).\u0275fac=function(e){return new(e||k)(l.Ob(y.b),l.Ob(o.a),l.Ob(c.f))},k.\u0275cmp=l.Ib({type:k,selectors:[["app-url-file-viewer"]],decls:2,vars:2,consts:[["width","100%","height","97%","frameborder","0","scrolling","no",3,"src",4,"ngIf"],[4,"ngIf"],["width","100%","height","97%","frameborder","0","scrolling","no",3,"src"],["expand","block",3,"click"],["slot","start","name","eye"]],template:function(e,t){1&e&&(l.nc(0,m,1,1,"iframe",0),l.nc(1,w,6,0,"div",1)),2&e&&(l.ec("ngIf","in-app"===t.mode),l.Eb(1),l.ec("ngIf","in-browser"===t.mode))},directives:[c.i,o.f,o.l],styles:["iframe[_ngcontent-%COMP%]{overflow:hidden;border:none}"]}),k),R=((g=function(){function t(n){e(this,t),this.factoryResolver=n}return n(t,[{key:"addViewer",value:function(e,t){var n=this.resolveComponentType(t),i=this.factoryResolver.resolveComponentFactory(n).create(e.parentInjector),r=i.instance;return r.setFile(t),e.insert(i.hostView),r}},{key:"resolveComponentType",value:function(e){return e.fileSystemEntry.name.endsWith(".md")?p:e.fileSystemEntry.name.endsWith(".url")?S:b}}]),t}()).\u0275fac=function(e){return new(e||g)(l.Vb(l.l))},g.\u0275prov=l.Kb({token:g,factory:g.\u0275fac}),g),O=r("bOdf"),F=r("Cfvw"),I=r("7DJ4"),C=r("YZAu"),E=r("I/6E"),P=["dynamic"];function Q(e,t){}var j,x,M,V,U=((j=function(){function t(n,i,r,o,c,s,a){e(this,t),this.fileViewerProviderService=n,this.route=i,this.fileSystemFacadeCacheService=r,this.toastService=o,this.refresherService=c,this.router=s,this.location=a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.routeDataSubscription=this.route.data.subscribe((function(t){e.file=t.file,e.fileSystemFacade=t.fileSystemFacade,e.currentViewer&&e.currentViewer.setFile(e.file)}))}},{key:"ngAfterViewInit",value:function(){this.currentViewer=this.fileViewerProviderService.addViewer(this.viewContainerRef,this.file)}},{key:"ngOnDestroy",value:function(){this.routeDataSubscription.unsubscribe()}},{key:"goToItem",value:function(e){var t=e.path.substr(1).split("/");this.router.navigate([this.getFileSystemPrefix()].concat(t))}},{key:"getFileSystemPrefix",value:function(){return"/tabs/home/file-system/"+this.file.fileSystemEntry.dataSource.id}},{key:"doRefresh",value:function(e){var t=this;this.fileSystemFacadeCacheService.refresh(this.fileSystemFacade).pipe(Object(O.a)((function(){var e=(t.file.fileSystemEntry.path+"-details").split("/");return Object(F.a)(t.router.navigate([t.getFileSystemPrefix()].concat(e),{skipLocationChange:!0,state:{refreshTime:new Date}}))})),this.refresherService.finishRefresher(e),this.toastService.catchErrorAndShowToast()).subscribe()}},{key:"back",value:function(){this.location.back()}}]),t}()).\u0275fac=function(e){return new(e||j)(l.Ob(R),l.Ob(a.a),l.Ob(I.a),l.Ob(C.a),l.Ob(E.a),l.Ob(a.g),l.Ob(c.f))},j.\u0275cmp=l.Ib({type:j,selectors:[["app-file"]],viewQuery:function(e,t){var n;1&e&&l.sc(P,!0,l.U),2&e&&l.gc(n=l.ac())&&(t.viewContainerRef=n.first)},decls:12,vars:4,consts:[[3,"translucent"],["slot","start"],[3,"click"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["dynamic",""]],template:function(e,t){1&e&&(l.Rb(0,"ion-header",0),l.Rb(1,"ion-toolbar"),l.Rb(2,"ion-buttons",1),l.Rb(3,"ion-back-button",2),l.Zb("click",(function(){return t.back()})),l.Qb(),l.Qb(),l.Rb(4,"ion-title"),l.Rb(5,"ion-label"),l.pc(6),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(7,"ion-content",3),l.Rb(8,"ion-refresher",4),l.Zb("ionRefresh",(function(e){return t.doRefresh(e)})),l.Pb(9,"ion-refresher-content"),l.Qb(),l.nc(10,Q,0,0,"ng-template",null,5,l.oc),l.Qb()),2&e&&(l.ec("translucent",!0),l.Eb(6),l.rc(" /",null==t.file||null==t.file.fileSystemEntry?null:t.file.fileSystemEntry.dataSource.id,"",null==t.file||null==t.file.fileSystemEntry?null:t.file.fileSystemEntry.path," "),l.Eb(1),l.ec("fullscreen",!0))},directives:[o.k,o.G,o.g,o.d,o.e,o.F,o.s,o.h,o.v,o.w],styles:[""]}),j),A=r("Yn41"),T=[{path:"",children:[{path:"**",component:U,runGuardsAndResolvers:"always",resolve:{fileSystemFacade:A.a,file:(x=function(){function t(n,i){e(this,t),this.toastService=n,this.fileSystemFacadeResolverService=i}return n(t,[{key:"resolve",value:function(e,t){var n=this,i=e.url.map((function(e){return e.path})).join("/"),r=i.endsWith("-details")?i.substr(0,i.length-"-details".length):i,o={};return this.fileSystemFacadeResolverService.resolve(e,t).pipe(Object(O.a)((function(e){return n.resolveForUrlAndParamMap(e,r,o)})),this.toastService.catchErrorAndShowToast())}},{key:"resolveForUrlAndParamMap",value:function(e,t,n){return e.resolveFile(t)}}]),t}(),x.\u0275fac=function(e){return new(e||x)(l.Vb(C.a),l.Vb(A.a))},x.\u0275prov=l.Kb({token:x,factory:x.\u0275fac,providedIn:"root"}),x)}}]}],z=((M=function t(){e(this,t)}).\u0275mod=l.Mb({type:M}),M.\u0275inj=l.Lb({factory:function(e){return new(e||M)},imports:[[a.i.forChild(T)],a.i]}),M),D=r("5M1D"),L=((V=function t(){e(this,t)}).\u0275mod=l.Mb({type:V}),V.\u0275inj=l.Lb({factory:function(e){return new(e||V)},providers:[R],imports:[[o.H,c.b,s.a,z,d.a,D.a]]}),V)}}])}();